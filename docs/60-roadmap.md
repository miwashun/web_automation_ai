# 60. ロードマップ（タスク分解・優先度）

## フェーズ0：成功条件
- KPI明文化（成功率≥99%、平均≤3分、ゼロ漏えい、月額コスト上限、Site Profile更新MTTR）
- 対象サイト：まず1サイト → 安定後に追加
- **コンプライアンスレビュー（ToS/API確認）を必須タスク化**

## フェーズ1：MVP（個人利用・最小構成）
- Python + Playwright + .env
- 1サイトのログイン→DL→保存→検証
- 構造化ログ、スクショ on_error
- 2FA対応（メールOTP/TOTP/SMS）
- **confirm_plan ステップ必須化**

**Week 1**
- リポジトリ初期化、DSLスキーマ作成、Playwright雛形、ログ基盤、Site Profile作成（ToS確認/API有無）

**Week 2**
- DL & ハッシュ検証 → S3保存（**SSE有効**）、リトライ・タイムアウト、CLI + Cron

**Week 3**
- 2FA実装（SMS含む）、秘密管理抽象化（Vault差替え可能）、100連続E2E試験、confirm_plan導入

**Week 4**
- 2サイト目追加、ミニダッシュボード、Go/No-Go判定（**コスト/KPI評価**）

## フェーズ2：SaaS化
- マルチテナント、Vault/KMS、ジョブキュー、水平方向スケール（ブラウザプーリング）
- 管理UI、UI変更耐性（冗長セレクタ + LLM補完）
- **LLMコスト管理（トークン使用量記録、予算ガード）**
- Captcha対応（オプション）、監査強化（git-crypt等）
- UX改善（未存在ファイル時の処理）

## 実装優先度（まとめ）
1. ToS/API確認
2. 2FA（SMS含む）対応
3. confirm_plan（誤操作防止）
4. UI変更耐性強化
5. ブラウザプーリング/キュー（性能）
6. LLMコスト管理（予算ガード）
7. Captcha対応
8. 監査強化
9. UXエッジケース対応
